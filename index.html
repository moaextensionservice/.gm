<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gambia Farmers Database - Connecting Farmers with Resources</title>
    <style>
        :root {
            --primary: #2E8B57;
            --secondary: #FFD700;
            --accent: #006400;
            --light: #F5F5F5;
            --dark: #333;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f8f9fa;
            color: #333;
            line-height: 1.6;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary), var(--accent));
            color: white;
            padding: 1rem 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .logo img {
            height: 60px;
        }
        
        .logo h1 {
            font-size: 1.8rem;
            font-weight: 700;
        }
        
        nav ul {
            display: flex;
            list-style: none;
        }
        
        nav ul li {
            margin-left: 20px;
        }
        
        nav ul li a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
            padding: 5px 10px;
            border-radius: 4px;
        }
        
        nav ul li a:hover {
            background-color: rgba(255,255,255,0.2);
        }
        
        .hero {
            background: url('https://images.unsplash.com/photo-1500382017468-9049fed747ef?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80') no-repeat center center/cover;
            height: 400px;
            display: flex;
            align-items: center;
            position: relative;
        }
        
        .hero::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
        }
        
        .hero-content {
            position: relative;
            z-index: 1;
            color: white;
            max-width: 600px;
        }
        
        .hero h2 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }
        
        .hero p {
            font-size: 1.2rem;
            margin-bottom: 1.5rem;
        }
        
        .btn {
            display: inline-block;
            background-color: var(--secondary);
            color: var(--dark);
            padding: 10px 20px;
            border-radius: 4px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
        }
        
        .btn:hover {
            background-color: #e6c200;
            transform: translateY(-2px);
        }
        
        .section {
            padding: 60px 0;
        }
        
        .section-title {
            text-align: center;
            margin-bottom: 40px;
            color: var(--accent);
        }
        
        .regions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .region-card {
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }
        
        .region-card:hover {
            transform: translateY(-5px);
        }
        
        .region-header {
            background-color: var(--primary);
            color: white;
            padding: 15px;
        }
        
        .region-header h3 {
            margin: 0;
        }
        
        .region-content {
            padding: 15px;
        }
        
        .district-list {
            list-style: none;
        }
        
        .district-item {
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }
        
        .district-item:last-child {
            border-bottom: none;
        }
        
        .district-name {
            font-weight: 600;
            color: var(--accent);
            margin-bottom: 5px;
        }
        
        .village-list {
            list-style: none;
            padding-left: 15px;
        }
        
        .village-item {
            margin-bottom: 5px;
            font-size: 0.9rem;
        }
        
        .data-actions {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }
        
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background: white;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            border-radius: 8px;
            overflow: hidden;
        }
        
        .data-table th {
            background-color: var(--primary);
            color: white;
            padding: 12px 15px;
            text-align: left;
        }
        
        .data-table td {
            padding: 12px 15px;
            border-bottom: 1px solid #eee;
        }
        
        .data-table tr:last-child td {
            border-bottom: none;
        }
        
        .data-table tr:hover {
            background-color: #f9f9f9;
        }
        
        .extension-worker {
            background-color: #e8f5e9;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .farmer-card, .garden-card {
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 15px;
        }
        
        .farmer-card h4, .garden-card h4 {
            color: var(--accent);
            margin-bottom: 10px;
        }
        
        footer {
            background-color: var(--dark);
            color: white;
            padding: 40px 0 20px;
        }
        
        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .footer-section h3 {
            margin-bottom: 15px;
            color: var(--secondary);
        }
        
        .footer-bottom {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid #444;
        }
        
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                text-align: center;
            }
            
            nav ul {
                margin-top: 15px;
                justify-content: center;
            }
            
            .hero h2 {
                font-size: 2rem;
            }
            
            .data-actions {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <h1>Gambia Farmers Database</h1>
                </div>
                <nav>
                    <ul>
                        <li><a href="#home">Home</a></li>
                        <li><a href="#regions">Regions</a></li>
                        <li><a href="#farmers">Farmers</a></li>
                        <li><a href="#resources">Resources</a></li>
                        <li><a href="#contact">Contact</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <section class="hero" id="home">
        <div class="container">
            <div class="hero-content">
                <h2>Connecting Gambian Farmers with Extension Workers & Decision Makers</h2>
                <p>A comprehensive database of commercial farmers and community gardens across all regions of The Gambia</p>
                <a href="#regions" class="btn">Explore Regions</a>
            </div>
        </div>
    </section>

    <section class="section" id="regions">
        <div class="container">
            <h2 class="section-title">Regions of The Gambia</h2>
            <div class="regions-grid" id="regions-container">
                <!-- Regions will be populated by JavaScript -->
            </div>
        </div>
    </section>

    <section class="section" id="farmers-data" style="background-color: #f0f8f0;">
        <div class="container">
            <h2 class="section-title">Farmers Database</h2>
            <div class="data-actions">
                <button class="btn" onclick="downloadAllData()">Download Complete Database</button>
                <button class="btn" onclick="downloadProductionData()">Download Production Capacity Data</button>
            </div>
            <div id="data-display">
                <!-- Data will be displayed here based on selection -->
            </div>
        </div>
    </section>

    <section class="section" id="resources">
        <div class="container">
            <h2 class="section-title">Agricultural Resources</h2>
            <div class="resources-content">
                <p>Access extension services, market information, and agricultural best practices to improve your farming operations.</p>
                <div class="data-actions">
                    <button class="btn">Extension Services</button>
                    <button class="btn">Market Prices</button>
                    <button class="btn">Training Programs</button>
                </div>
            </div>
        </div>
    </section>

    <footer id="contact">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Gambia Farmers Database</h3>
                    <p>Connecting farmers with extension workers and decision makers for improved agricultural productivity in The Gambia.</p>
                </div>
                <div class="footer-section">
                    <h3>Contact Information</h3>
                    <p>Email: info@gambiafarmers.gm</p>
                    <p>Phone: +220 123 4567</p>
                    <p>Address: Department of Agriculture, Banjul, The Gambia</p>
                </div>
                <div class="footer-section">
                    <h3>Quick Links</h3>
                    <ul>
                        <li><a href="#home">Home</a></li>
                        <li><a href="#regions">Regions</a></li>
                        <li><a href="#farmers">Farmers Database</a></li>
                        <li><a href="#resources">Resources</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2023 Gambia Farmers Database. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // Comprehensive data structure for The Gambia Farmers Database
        const gambiaFarmersData = {
            regions: [
                {
                    id: 1,
                    name: "BANJUL REGION",
                    capital: "Banjul City Council",
                    districts: [
                        {
                            id: 1,
                            name: "Banjul Central",
                            villages: ["Half-Die", "Campama", "Crab Island", "New Town", "Booreng"],
                            wards: [
                                {
                                    id: 1,
                                    name: "Ward 1",
                                    village: "Half-Die",
                                    extensionWorker: {
                                        name: "Musa Jallow",
                                        office: "Half-Die Extension Office",
                                        contact: "+220 123 4567",
                                        gender: "male"
                                    },
                                    communityGarden: {
                                        village: "Half-Die",
                                        products: ["Tomatoes", "Onions", "Cabbage"],
                                        presidentContact: "+220 234 5678",
                                        productionFrequency: "3 times a year"
                                    },
                                    farmers: [
                                        {
                                            type: "commercial",
                                            name: "Fatou Sowe",
                                            location: "Half-Die",
                                            products: ["Vegetables", "Fruits"],
                                            productionCapacity: "5 tons per season",
                                            profile: "https://gambiafarmers.gm/fatou-sowe",
                                            contact: "+220 345 6789",
                                            employees: 8,
                                            gender: "female"
                                        },
                                        {
                                            type: "commercial",
                                            name: "Lamin Jatta",
                                            location: "Half-Die",
                                            products: ["Rice", "Maize"],
                                            productionCapacity: "12 tons per season",
                                            profile: "https://gambiafarmers.gm/lamin-jatta",
                                            contact: "+220 456 7890",
                                            employees: 15,
                                            gender: "male"
                                        }
                                    ]
                                },
                                {
                                    id: 2,
                                    name: "Ward 2",
                                    village: "Campama",
                                    extensionWorker: {
                                        name: "Aminata Ceesay",
                                        office: "Campama Extension Office",
                                        contact: "+220 567 8901",
                                        gender: "female"
                                    },
                                    communityGarden: {
                                        village: "Campama",
                                        products: ["Lettuce", "Carrots", "Peppers"],
                                        presidentContact: "+220 678 9012",
                                        productionFrequency: "2 times a year"
                                    },
                                    farmers: [
                                        {
                                            type: "commercial",
                                            name: "Ousman Njie",
                                            location: "Campama",
                                            products: ["Groundnuts", "Beans"],
                                            productionCapacity: "8 tons per season",
                                            profile: "https://gambiafarmers.gm/ousman-njie",
                                            contact: "+220 789 0123",
                                            employees: 12,
                                            gender: "male"
                                        },
                                        {
                                            type: "commercial",
                                            name: "Kaddy Jammeh",
                                            location: "Campama",
                                            products: ["Vegetables", "Herbs"],
                                            productionCapacity: "3 tons per season",
                                            profile: "https://gambiafarmers.gm/kaddy-jammeh",
                                            contact: "+220 890 1234",
                                            employees: 6,
                                            gender: "female"
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    id: 2,
                    name: "KANIFING REGION",
                    capital: "Kanifing Municipal Council",
                    districts: [
                        {
                            id: 1,
                            name: "Kanifing District",
                            villages: ["Serekunda", "Bakau", "Fajara", "Latrikunda Sabiji", "Bundung"],
                            wards: [
                                {
                                    id: 1,
                                    name: "Ward 1",
                                    village: "Serekunda",
                                    extensionWorker: {
                                        name: "Ebrima Sarr",
                                        office: "Serekunda Extension Office",
                                        contact: "+220 901 2345",
                                        gender: "male"
                                    },
                                    communityGarden: {
                                        village: "Serekunda",
                                        products: ["Tomatoes", "Okra", "Eggplant"],
                                        presidentContact: "+220 012 3456",
                                        productionFrequency: "4 times a year"
                                    },
                                    farmers: [
                                        {
                                            type: "commercial",
                                            name: "Mariama Bojang",
                                            location: "Serekunda",
                                            products: ["Fruits", "Vegetables"],
                                            productionCapacity: "7 tons per season",
                                            profile: "https://gambiafarmers.gm/mariama-bojang",
                                            contact: "+220 123 7890",
                                            employees: 10,
                                            gender: "female"
                                        },
                                        {
                                            type: "commercial",
                                            name: "Modou Faal",
                                            location: "Serekunda",
                                            products: ["Maize", "Millet"],
                                            productionCapacity: "15 tons per season",
                                            profile: "https://gambiafarmers.gm/modou-faal",
                                            contact: "+220 234 8901",
                                            employees: 20,
                                            gender: "male"
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    id: 3,
                    name: "WEST COAST REGION",
                    capital: "Brikama",
                    districts: [
                        {
                            id: 1,
                            name: "Kombo South",
                            villages: ["Sanyang", "Gunjur", "Tanji", "Kartong", "Jambanjelly"],
                            wards: [
                                {
                                    id: 1,
                                    name: "Ward 1",
                                    village: "Sanyang",
                                    extensionWorker: {
                                        name: "Hawa Manneh",
                                        office: "Sanyang Extension Office",
                                        contact: "+220 345 9012",
                                        gender: "female"
                                    },
                                    communityGarden: {
                                        village: "Sanyang",
                                        products: ["Cabbage", "Lettuce", "Tomatoes"],
                                        presidentContact: "+220 456 0123",
                                        productionFrequency: "3 times a year"
                                    },
                                    farmers: [
                                        {
                                            type: "commercial",
                                            name: "Lamin Darboe",
                                            location: "Sanyang",
                                            products: ["Rice", "Vegetables"],
                                            productionCapacity: "10 tons per season",
                                            profile: "https://gambiafarmers.gm/lamin-darboe",
                                            contact: "+220 567 1234",
                                            employees: 14,
                                            gender: "male"
                                        },
                                        {
                                            type: "commercial",
                                            name: "Fatou Jallow",
                                            location: "Sanyang",
                                            products: ["Fruits", "Herbs"],
                                            productionCapacity: "4 tons per season",
                                            profile: "https://gambiafarmers.gm/fatou-jallow",
                                            contact: "+220 678 2345",
                                            employees: 7,
                                            gender: "female"
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    id: 4,
                    name: "NORTH BANK REGION",
                    capital: "Kerewan",
                    districts: [
                        {
                            id: 1,
                            name: "Lower Niumi",
                            villages: ["Barra", "Essau", "Albreda", "Kanuma", "Jinack Kajata"],
                            wards: [
                                {
                                    id: 1,
                                    name: "Ward 1",
                                    village: "Barra",
                                    extensionWorker: {
                                        name: "Omar Jobe",
                                        office: "Barra Extension Office",
                                        contact: "+220 789 3456",
                                        gender: "male"
                                    },
                                    communityGarden: {
                                        village: "Barra",
                                        products: ["Onions", "Peppers", "Tomatoes"],
                                        presidentContact: "+220 890 4567",
                                        productionFrequency: "2 times a year"
                                    },
                                    farmers: [
                                        {
                                            type: "commercial",
                                            name: "Isatou Sanyang",
                                            location: "Barra",
                                            products: ["Vegetables", "Legumes"],
                                            productionCapacity: "6 tons per season",
                                            profile: "https://gambiafarmers.gm/isatou-sanyang",
                                            contact: "+220 901 5678",
                                            employees: 9,
                                            gender: "female"
                                        },
                                        {
                                            type: "commercial",
                                            name: "Bubacarr Sawo",
                                            location: "Barra",
                                            products: ["Maize", "Groundnuts"],
                                            productionCapacity: "18 tons per season",
                                            profile: "https://gambiafarmers.gm/bubacarr-sawo",
                                            contact: "+220 012 6789",
                                            employees: 22,
                                            gender: "male"
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    id: 5,
                    name: "LOWER RIVER REGION",
                    capital: "Mansakonko",
                    districts: [
                        {
                            id: 1,
                            name: "Jarra East",
                            villages: ["Bureng", "Dasilameh", "Dongoroba", "Fellenkoto", "Karantaba Jarreng"],
                            wards: [
                                {
                                    id: 1,
                                    name: "Ward 1",
                                    village: "Bureng",
                                    extensionWorker: {
                                        name: "Aisha Fofana",
                                        office: "Bureng Extension Office",
                                        contact: "+220 123 9012",
                                        gender: "female"
                                    },
                                    communityGarden: {
                                        village: "Bureng",
                                        products: ["Cabbage", "Carrots", "Lettuce"],
                                        presidentContact: "+220 234 0123",
                                        productionFrequency: "3 times a year"
                                    },
                                    farmers: [
                                        {
                                            type: "commercial",
                                            name: "Lamin Saine",
                                            location: "Bureng",
                                            products: ["Rice", "Vegetables"],
                                            productionCapacity: "14 tons per season",
                                            profile: "https://gambiafarmers.gm/lamin-saine",
                                            contact: "+220 345 1234",
                                            employees: 18,
                                            gender: "male"
                                        },
                                        {
                                            type: "commercial",
                                            name: "Kaddy Sarr",
                                            location: "Bureng",
                                            products: ["Fruits", "Herbs"],
                                            productionCapacity: "5 tons per season",
                                            profile: "https://gambiafarmers.gm/kaddy-sarr",
                                            contact: "+220 456 2345",
                                            employees: 8,
                                            gender: "female"
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    id: 6,
                    name: "CENTRAL RIVER REGION",
                    capital: "Janjanbureh & Kuntaur",
                    districts: [
                        {
                            id: 1,
                            name: "Niamina East",
                            villages: ["Sapu", "Kudang", "Missira", "Jarreng", "Kunting"],
                            wards: [
                                {
                                    id: 1,
                                    name: "Ward 1",
                                    village: "Sapu",
                                    extensionWorker: {
                                        name: "Alieu Sanneh",
                                        office: "Sapu Extension Office",
                                        contact: "+220 567 4567",
                                        gender: "male"
                                    },
                                    communityGarden: {
                                        village: "Sapu",
                                        products: ["Tomatoes", "Onions", "Peppers"],
                                        presidentContact: "+220 678 5678",
                                        productionFrequency: "2 times a year"
                                    },
                                    farmers: [
                                        {
                                            type: "commercial",
                                            name: "Fatou Camara",
                                            location: "Sapu",
                                            products: ["Vegetables", "Legumes"],
                                            productionCapacity: "7 tons per season",
                                            profile: "https://gambiafarmers.gm/fatou-camara",
                                            contact: "+220 789 6789",
                                            employees: 11,
                                            gender: "female"
                                        },
                                        {
                                            type: "commercial",
                                            name: "Ebrima Jeng",
                                            location: "Sapu",
                                            products: ["Maize", "Millet"],
                                            productionCapacity: "16 tons per season",
                                            profile: "https://gambiafarmers.gm/ebrima-jeng",
                                            contact: "+220 890 7890",
                                            employees: 19,
                                            gender: "male"
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    id: 7,
                    name: "UPPER RIVER REGION",
                    capital: "Basse",
                    districts: [
                        {
                            id: 1,
                            name: "Wuli East",
                            villages: ["Bantunding", "Wellingara Yare", "Sare Ngai Sillah", "Barrow Kunda East", "Koli Kunda"],
                            wards: [
                                {
                                    id: 1,
                                    name: "Ward 1",
                                    village: "Bantunding",
                                    extensionWorker: {
                                        name: "Mariama Jallow",
                                        office: "Bantunding Extension Office",
                                        contact: "+220 901 8901",
                                        gender: "female"
                                    },
                                    communityGarden: {
                                        village: "Bantunding",
                                        products: ["Cabbage", "Lettuce", "Tomatoes"],
                                        presidentContact: "+220 012 9012",
                                        productionFrequency: "3 times a year"
                                    },
                                    farmers: [
                                        {
                                            type: "commercial",
                                            name: "Lamin Colley",
                                            location: "Bantunding",
                                            products: ["Rice", "Vegetables"],
                                            productionCapacity: "11 tons per season",
                                            profile: "https://gambiafarmers.gm/lamin-colley",
                                            contact: "+220 123 0123",
                                            employees: 16,
                                            gender: "male"
                                        },
                                        {
                                            type: "commercial",
                                            name: "Aminata Sowe",
                                            location: "Bantunding",
                                            products: ["Fruits", "Herbs"],
                                            productionCapacity: "6 tons per season",
                                            profile: "https://gambiafarmers.gm/aminata-sowe",
                                            contact: "+220 234 1234",
                                            employees: 9,
                                            gender: "female"
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        };

        // Function to display regions on the page
        function displayRegions() {
            const regionsContainer = document.getElementById('regions-container');
            regionsContainer.innerHTML = '';

            gambiaFarmersData.regions.forEach(region => {
                const regionCard = document.createElement('div');
                regionCard.className = 'region-card';
                
                let districtsHTML = '';
                region.districts.forEach(district => {
                    districtsHTML += `
                        <div class="district-item">
                            <div class="district-name">${district.name}</div>
                            <ul class="village-list">
                                ${district.villages.map(village => `<li class="village-item">${village}</li>`).join('')}
                            </ul>
                            <button class="btn" style="margin-top: 10px; padding: 5px 10px; font-size: 0.8rem;" onclick="showRegionData(${region.id})">View Data & Download CSV</button>
                        </div>
                    `;
                });
                
                regionCard.innerHTML = `
                    <div class="region-header">
                        <h3>${region.name}</h3>
                        <p>Capital: ${region.capital}</p>
                    </div>
                    <div class="region-content">
                        <h4>Districts</h4>
                        <div class="district-list">
                            ${districtsHTML}
                        </div>
                    </div>
                `;
                
                regionsContainer.appendChild(regionCard);
            });
        }

        // Function to show data for a specific region
        function showRegionData(regionId) {
            const region = gambiaFarmersData.regions.find(r => r.id === regionId);
            const dataDisplay = document.getElementById('data-display');
            
            let html = `<h3 style="text-align: center; margin-bottom: 20px;">${region.name} - Farmers and Extension Workers</h3>`;
            
            region.districts.forEach(district => {
                html += `<h4 style="margin-top: 20px; color: var(--accent);">${district.name} District</h4>`;
                
                district.wards.forEach(ward => {
                    html += `
                        <div style="margin: 15px 0; padding: 15px; background: white; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                            <h5 style="color: var(--primary);">${ward.name} - ${ward.village}</h5>
                            
                            <div class="extension-worker">
                                <h6>Extension Worker:</h6>
                                <p><strong>Name:</strong> ${ward.extensionWorker.name}</p>
                                <p><strong>Office:</strong> ${ward.extensionWorker.office}</p>
                                <p><strong>Contact:</strong> ${ward.extensionWorker.contact}</p>
                                <p><strong>Gender:</strong> ${ward.extensionWorker.gender}</p>
                            </div>
                            
                            <div class="garden-card">
                                <h6>Community Garden:</h6>
                                <p><strong>Village:</strong> ${ward.communityGarden.village}</p>
                                <p><strong>Products:</strong> ${ward.communityGarden.products.join(', ')}</p>
                                <p><strong>President Contact:</strong> ${ward.communityGarden.presidentContact}</p>
                                <p><strong>Production Frequency:</strong> ${ward.communityGarden.productionFrequency}</p>
                            </div>
                            
                            <h6 style="margin-top: 15px;">Commercial Farmers:</h6>
                    `;
                    
                    ward.farmers.forEach(farmer => {
                        html += `
                            <div class="farmer-card">
                                <p><strong>Name:</strong> ${farmer.name} (${farmer.gender})</p>
                                <p><strong>Location:</strong> ${farmer.location}</p>
                                <p><strong>Products:</strong> ${Array.isArray(farmer.products) ? farmer.products.join(', ') : farmer.products}</p>
                                <p><strong>Production Capacity:</strong> ${farmer.productionCapacity}</p>
                                <p><strong>Profile:</strong> <a href="${farmer.profile}" target="_blank">View Profile</a></p>
                                <p><strong>Contact:</strong> ${farmer.contact}</p>
                                <p><strong>Employees:</strong> ${farmer.employees}</p>
                            </div>
                        `;
                    });
                    
                    html += `</div>`;
                });
            });
            
            html += `
                <div class="data-actions">
                    <button class="btn" onclick="downloadRegionCSV(${regionId})">Download ${region.name} CSV</button>
                    <button class="btn" onclick="downloadRegionProductionCSV(${regionId})">Download ${region.name} Production Data</button>
                </div>
            `;
            
            dataDisplay.innerHTML = html;
            
            // Scroll to data display section
            document.getElementById('farmers-data').scrollIntoView({ behavior: 'smooth' });
        }

        // Function to download all data as CSV
        function downloadAllData() {
            let csvContent = "Region,District,Ward,Village,Type,Name,Gender,Products,Production Capacity,Contact,Employees,Profile,Production Frequency,President Contact,Office\n";
            
            gambiaFarmersData.regions.forEach(region => {
                region.districts.forEach(district => {
                    district.wards.forEach(ward => {
                        // Add extension worker
                        csvContent += `"${region.name}","${district.name}","${ward.name}","${ward.village}","Extension Worker","${ward.extensionWorker.name}","${ward.extensionWorker.gender}","","","${ward.extensionWorker.contact}","","","","","${ward.extensionWorker.office}"\n`;
                        
                        // Add community garden
                        csvContent += `"${region.name}","${district.name}","${ward.name}","${ward.village}","Community Garden","","","${ward.communityGarden.products.join(', ')}","","","","","${ward.communityGarden.productionFrequency}","${ward.communityGarden.presidentContact}",""\n`;
                        
                        // Add farmers
                        ward.farmers.forEach(farmer => {
                            csvContent += `"${region.name}","${district.name}","${ward.name}","${ward.village}","Commercial Farmer","${farmer.name}","${farmer.gender}","${Array.isArray(farmer.products) ? farmer.products.join(', ') : farmer.products}","${farmer.productionCapacity}","${farmer.contact}","${farmer.employees}","${farmer.profile}","","",""\n`;
                        });
                    });
                });
            });
            
            downloadCSV(csvContent, 'gambia_farmers_complete_database.csv');
        }

        // Function to download production data as CSV
        function downloadProductionData() {
            let csvContent = "Region,District,Product,Total Production Capacity,Number of Farmers\n";
            
            const productionData = {};
            
            gambiaFarmersData.regions.forEach(region => {
                productionData[region.name] = {};
                
                region.districts.forEach(district => {
                    productionData[region.name][district.name] = {};
                    
                    district.wards.forEach(ward => {
                        ward.farmers.forEach(farmer => {
                            const products = Array.isArray(farmer.products) ? farmer.products : [farmer.products];
                            
                            products.forEach(product => {
                                if (!productionData[region.name][district.name][product]) {
                                    productionData[region.name][district.name][product] = {
                                        capacity: 0,
                                        farmers: 0
                                    };
                                }
                                
                                // Extract numeric value from production capacity string
                                const capacityMatch = farmer.productionCapacity.match(/(\d+)/);
                                const capacity = capacityMatch ? parseInt(capacityMatch[1]) : 0;
                                
                                productionData[region.name][district.name][product].capacity += capacity;
                                productionData[region.name][district.name][product].farmers += 1;
                            });
                        });
                    });
                });
            });
            
            // Build CSV content
            Object.keys(productionData).forEach(region => {
                Object.keys(productionData[region]).forEach(district => {
                    Object.keys(productionData[region][district]).forEach(product => {
                        const data = productionData[region][district][product];
                        csvContent += `"${region}","${district}","${product}","${data.capacity} tons","${data.farmers}"\n`;
                    });
                });
            });
            
            downloadCSV(csvContent, 'gambia_farmers_production_capacity.csv');
        }

        // Function to download a specific region's CSV
        function downloadRegionCSV(regionId) {
            const region = gambiaFarmersData.regions.find(r => r.id === regionId);
            let csvContent = "Region,District,Ward,Village,Type,Name,Gender,Products,Production Capacity,Contact,Employees,Profile,Production Frequency,President Contact,Office\n";
            
            region.districts.forEach(district => {
                district.wards.forEach(ward => {
                    // Add extension worker
                    csvContent += `"${region.name}","${district.name}","${ward.name}","${ward.village}","Extension Worker","${ward.extensionWorker.name}","${ward.extensionWorker.gender}","","","${ward.extensionWorker.contact}","","","","","${ward.extensionWorker.office}"\n`;
                    
                    // Add community garden
                    csvContent += `"${region.name}","${district.name}","${ward.name}","${ward.village}","Community Garden","","","${ward.communityGarden.products.join(', ')}","","","","","${ward.communityGarden.productionFrequency}","${ward.communityGarden.presidentContact}",""\n`;
                    
                    // Add farmers
                    ward.farmers.forEach(farmer => {
                        csvContent += `"${region.name}","${district.name}","${ward.name}","${ward.village}","Commercial Farmer","${farmer.name}","${farmer.gender}","${Array.isArray(farmer.products) ? farmer.products.join(', ') : farmer.products}","${farmer.productionCapacity}","${farmer.contact}","${farmer.employees}","${farmer.profile}","","",""\n`;
                    });
                });
            });
            
            downloadCSV(csvContent, `${region.name.replace(/\s+/g, '_')}_database.csv`);
        }

        // Function to download a specific region's production data
        function downloadRegionProductionCSV(regionId) {
            const region = gambiaFarmersData.regions.find(r => r.id === regionId);
            let csvContent = "Region,District,Product,Total Production Capacity,Number of Farmers\n";
            
            const productionData = {};
            
            region.districts.forEach(district => {
                productionData[district.name] = {};
                
                district.wards.forEach(ward => {
                    ward.farmers.forEach(farmer => {
                        const products = Array.isArray(farmer.products) ? farmer.products : [farmer.products];
                        
                        products.forEach(product => {
                            if (!productionData[district.name][product]) {
                                productionData[district.name][product] = {
                                    capacity: 0,
                                    farmers: 0
                                };
                            }
                            
                            // Extract numeric value from production capacity string
                            const capacityMatch = farmer.productionCapacity.match(/(\d+)/);
                            const capacity = capacityMatch ? parseInt(capacityMatch[1]) : 0;
                            
                            productionData[district.name][product].capacity += capacity;
                            productionData[district.name][product].farmers += 1;
                        });
                    });
                });
            });
            
            // Build CSV content
            Object.keys(productionData).forEach(district => {
                Object.keys(productionData[district]).forEach(product => {
                    const data = productionData[district][product];
                    csvContent += `"${region.name}","${district}","${product}","${data.capacity} tons","${data.farmers}"\n`;
                });
            });
            
            downloadCSV(csvContent, `${region.name.replace(/\s+/g, '_')}_production_capacity.csv`);
        }

        // Helper function to download CSV
        function downloadCSV(csvContent, fileName) {
            const encodedUri = encodeURI('data:text/csv;charset=utf-8,' + csvContent);
            const link = document.createElement('a');
            link.setAttribute('href', encodedUri);
            link.setAttribute('download', fileName);
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        // Initialize the page when loaded
        document.addEventListener('DOMContentLoaded', function() {
            displayRegions();
        });
    </script>
</body>
</html>

